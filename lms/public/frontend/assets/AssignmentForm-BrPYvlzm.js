var L=Object.defineProperty;var w=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var x=(o,t,n)=>t in o?L(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,c=(o,t)=>{for(var n in t||(t={}))C.call(t,n)&&x(o,n,t[n]);if(w)for(var n of w(t))T.call(t,n)&&x(o,n,t[n]);return o};import{a as q,s as F,f as B,F as N,a8 as P,a7 as R,j as U,w as $,d as k,G as j,z as i,J as u,C as l,aG as M,v as K,H as z,y as p,a5 as g,I as _,K as D,P as A,T as G,L as O,ay as H,x as S}from"./frappe-ui-2-dobwEi.js";import{s as b}from"./index-Dg_4Jaqk.js";const J={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},Q={class:"space-x-2"},W={class:"w-3/4 mx-auto py-5"},X={class:"font-semibold mb-4"},Y={class:"grid grid-cols-2 gap-5 mt-4 mb-8"},Z={class:"text-xs text-ink-gray-5 mb-2"},ne={__name:"AssignmentForm",props:{assignmentID:{type:String,required:!0}},setup(o){const t=B("$user"),n=N(),d=o,r=q({title:"",type:"PDF",question:""});F(()=>{var e,s;d.assignmentID=="new"&&!((e=t.data)!=null&&e.is_moderator)&&!((s=t.data)!=null&&s.is_instructor)&&n.push({name:"Courses"}),d.assignmentID!=="new"&&a.reload(),window.addEventListener("keydown",f)});const f=e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)&&(y(),e.preventDefault())};R(()=>{window.removeEventListener("keydown",f)});const a=P({doctype:"LMS Assignment",name:d.assignmentID,auto:!1}),V=U({url:"frappe.client.insert",makeParams(e){return{doc:c({doctype:"LMS Assignment"},e)}},onSuccess(e){n.push({name:"AssignmentForm",params:{assignmentID:e.name}})},onError(e){var s;b(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}}),y=()=>{d.assignmentID=="new"?V.submit(c({},r)):a.setValue.submit(c({},r),{onSuccess(e){b(__("Success"),__("Assignment saved successfully"),"check"),a.reload()},onError(e){var s;b(__("Error"),__(((s=e.messages)==null?void 0:s[0])||e),"x")}})};$(a,()=>{Object.keys(a.doc).forEach(e=>{r[e]=a.doc[e]})});const I=k(()=>[{label:__("Assignments"),route:{name:"Assignments"}},{label:a.doc?a.doc.title:__("New Assignment")}]),h=k(()=>[{label:"PDF",value:"PDF"},{label:"Image",value:"Image"},{label:"Document",value:"Document"},{label:"Text",value:"Text"},{label:"URL",value:"URL"}]);return(e,s)=>{var v;const E=H("router-link");return S(),j(O,null,[i("header",J,[u(l(M),{items:I.value},null,8,["items"]),i("div",Q,[(v=l(a).doc)!=null&&v.name?(S(),K(E,{key:0,to:{name:"AssignmentSubmissionList",query:{assignmentID:l(a).doc.name}}},{default:p(()=>[u(l(D),null,{default:p(()=>[g(_(e.__("Submission List")),1)]),_:1})]),_:1},8,["to"])):z("",!0),u(l(D),{variant:"solid",onClick:s[0]||(s[0]=m=>y())},{default:p(()=>[g(_(e.__("Save")),1)]),_:1})])]),i("div",W,[i("div",X,_(e.__("Details")),1),i("div",Y,[u(l(A),{modelValue:r.title,"onUpdate:modelValue":s[1]||(s[1]=m=>r.title=m),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),u(l(A),{modelValue:r.type,"onUpdate:modelValue":s[2]||(s[2]=m=>r.type=m),type:"select",options:h.value,label:e.__("Type"),required:!0},null,8,["modelValue","options","label"])]),i("div",null,[i("div",Z,[g(_(e.__("Question"))+" ",1),s[4]||(s[4]=i("span",{class:"text-ink-red-3"},"*",-1))]),u(l(G),{content:r.question,onChange:s[3]||(s[3]=m=>r.question=m),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]"},null,8,["content"])])])],64)}}};export{ne as default};
//# sourceMappingURL=AssignmentForm-BrPYvlzm.js.map
