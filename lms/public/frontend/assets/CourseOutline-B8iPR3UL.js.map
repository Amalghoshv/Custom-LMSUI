{"version":3,"file":"CourseOutline-B8iPR3UL.js","sources":["../../../../frontend/src/components/Modals/ChapterModal.vue","../../../../frontend/src/components/CourseOutline.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: chapterDetail ? __('Edit Chapter') : __('Add Chapter'),\n\t\t\tsize: 'lg',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: chapterDetail ? __('Edit') : __('Create'),\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) =>\n\t\t\t\t\t\tchapterDetail ? editChapter(close) : addChapter(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4 text-base\">\n\t\t\t\t<FormControl label=\"Title\" v-model=\"chapter.title\" :required=\"true\" />\n\t\t\t\t<Switch\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t:label=\"__('SCORM Package')\"\n\t\t\t\t\t:description=\"\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enable this only if you want to upload a SCORM package as a chapter.'\n\t\t\t\t\t\t)\n\t\t\t\t\t\"\n\t\t\t\t\tv-model=\"chapter.is_scorm_package\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"chapter.is_scorm_package\">\n\t\t\t\t\t<FileUploader\n\t\t\t\t\t\tv-if=\"!chapter.scorm_package\"\n\t\t\t\t\t\t:fileTypes=\"['.zip']\"\n\t\t\t\t\t\t:validateFile=\"validateFile\"\n\t\t\t\t\t\t@success=\"(file) => (chapter.scorm_package = file)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot=\"{ file, progress, uploading, openFileSelector }\">\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button @click=\"openFileSelector\" :loading=\"uploading\">\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tuploading ? `Uploading ${progress}%` : 'Upload an zip file'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FileUploader>\n\t\t\t\t\t<div v-else class=\"\">\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<div class=\"border rounded-md p-2 mr-2\">\n\t\t\t\t\t\t\t\t<FileText class=\"h-5 w-5 stroke-1.5 text-ink-gray-7\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ chapter.scorm_package.file_name }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"text-sm text-ink-gray-4 mt-1\">\n\t\t\t\t\t\t\t\t\t{{ getFileSize(chapter.scorm_package.file_size) }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t@click=\"() => (chapter.scorm_package = null)\"\n\t\t\t\t\t\t\t\tclass=\"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tButton,\n\tcreateResource,\n\tDialog,\n\tFileUploader,\n\tFormControl,\n\tSwitch,\n} from 'frappe-ui'\nimport { defineModel, reactive, watch } from 'vue'\nimport { showToast, getFileSize } from '@/utils/'\nimport { capture } from '@/telemetry'\nimport { FileText, X } from 'lucide-vue-next'\nimport { useSettings } from '@/stores/settings'\n\nconst show = defineModel()\nconst outline = defineModel('outline')\nconst settingsStore = useSettings()\n\nconst props = defineProps({\n\tcourse: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tchapterDetail: {\n\t\ttype: Object,\n\t},\n})\n\nconst chapter = reactive({\n\ttitle: '',\n\tis_scorm_package: 0,\n\tscorm_package: null,\n})\n\nconst chapterResource = createResource({\n\turl: 'lms.lms.api.upsert_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\ttitle: chapter.title,\n\t\t\tcourse: props.course,\n\t\t\tis_scorm_package: chapter.is_scorm_package,\n\t\t\tscorm_package: chapter.scorm_package,\n\t\t\tname: props.chapterDetail?.name,\n\t\t}\n\t},\n})\n\nconst chapterReference = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Chapter Reference',\n\t\t\t\tchapter: values.name,\n\t\t\t\tparent: props.course,\n\t\t\t\tparenttype: 'LMS Course',\n\t\t\t\tparentfield: 'chapters',\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst addChapter = async (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\treturn validateChapter()\n\t\t\t},\n\t\t\tonSuccess: (data) => {\n\t\t\t\tcapture('chapter_created')\n\t\t\t\tchapterReference.submit(\n\t\t\t\t\t{ name: data.name },\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess(data) {\n\t\t\t\t\t\t\tcleanChapter()\n\t\t\t\t\t\t\t/* if (!settingsStore.onboardingDetails.data?.is_onboarded) {\n\t\t\t\t\t\t\t\tsettingsStore.onboardingDetails.reload()\n\t\t\t\t\t\t\t} */\n\t\t\t\t\t\t\toutline.value.reload()\n\t\t\t\t\t\t\tshowToast(\n\t\t\t\t\t\t\t\t__('Success'),\n\t\t\t\t\t\t\t\t__('Chapter added successfully'),\n\t\t\t\t\t\t\t\t'check'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError(err) {\n\t\t\t\t\t\t\tshowToast(__('Error'), err.messages?.[0] || err, 'x')\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tshowToast(__('Error'), err.messages?.[0] || err, 'x')\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst validateChapter = () => {\n\tif (!chapter.title) {\n\t\treturn __('Title is required')\n\t}\n\tif (chapter.is_scorm_package && !chapter.scorm_package) {\n\t\treturn __('Please upload a SCORM package')\n\t}\n}\n\nconst cleanChapter = () => {\n\tchapter.title = ''\n\tchapter.is_scorm_package = 0\n\tchapter.scorm_package = null\n}\n\nconst editChapter = (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!chapter.title) {\n\t\t\t\t\treturn 'Title is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\toutline.value.reload()\n\t\t\t\tshowToast(__('Success'), __('Chapter updated successfully'), 'check')\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tshowToast(__('Error'), err.messages?.[0] || err, 'x')\n\t\t\t},\n\t\t}\n\t)\n}\n\nwatch(\n\t() => props.chapterDetail,\n\t(newChapter) => {\n\t\tchapter.title = newChapter?.title\n\t\tchapter.is_scorm_package = newChapter?.is_scorm_package\n\t\tchapter.scorm_package = newChapter?.scorm_package\n\t}\n)\n\nconst validateFile = (file) => {\n\tlet extension = file.name.split('.').pop().toLowerCase()\n\tif (extension !== 'zip') {\n\t\treturn __('Only zip files are allowed')\n\t}\n}\n</script>\n","<template>\n\t<div class=\"text-base\">\n\t\t<div\n\t\t\tv-if=\"title && (outline.data?.length || allowEdit)\"\n\t\t\tclass=\"grid grid-cols-[70%,30%] mb-4 px-2\"\n\t\t>\n\t\t\t<div class=\"font-semibold text-lg leading-5 text-ink-gray-9\">\n\t\t\t\t{{ __(title) }}\n\t\t\t</div>\n\t\t\t<Button size=\"sm\" v-if=\"allowEdit\" @click=\"openChapterModal()\">\n\t\t\t\t{{ __('Add Chapter') }}\n\t\t\t</Button>\n\t\t\t<!-- <span class=\"font-medium cursor-pointer\" @click=\"expandAllChapters()\">\n\t\t\t\t{{ expandAll ? __(\"Collapse all chapters\") : __(\"Expand all chapters\") }}\n\t\t\t</span> -->\n\t\t</div>\n\t\t<div\n\t\t\t:class=\"{\n\t\t\t\t'border-2 rounded-md py-2 px-2': showOutline && outline.data?.length,\n\t\t\t}\"\n\t\t>\n\t\t\t<Disclosure\n\t\t\t\tv-slot=\"{ open }\"\n\t\t\t\tv-for=\"(chapter, index) in outline.data\"\n\t\t\t\t:key=\"chapter.name\"\n\t\t\t\t:defaultOpen=\"openChapterDetail(chapter.idx)\"\n\t\t\t>\n\t\t\t\t<DisclosureButton ref=\"\" class=\"flex items-center w-full p-2 group\">\n\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'rotate-90 transform duration-200': open,\n\t\t\t\t\t\t\t'duration-200': !open,\n\t\t\t\t\t\t\thidden: chapter.is_scorm_package,\n\t\t\t\t\t\t\topen: index == 1,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 stroke-1\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"text-base text-left text-ink-gray-9 font-medium leading-5 ml-2\"\n\t\t\t\t\t\t@click=\"redirectToChapter(chapter)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ chapter.title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex ml-auto space-x-4\">\n\t\t\t\t\t\t<Tooltip :text=\"__('Edit Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t<FilePenLine\n\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t@click.prevent=\"openChapterModal(chapter)\"\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 invisible group-hover:visible\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip :text=\"__('Delete Chapter')\" placement=\"bottom\">\n\t\t\t\t\t\t\t<Trash2\n\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t@click.prevent=\"trashChapter(chapter.name)\"\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-red-3 invisible group-hover:visible\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t</DisclosureButton>\n\t\t\t\t<DisclosurePanel v-if=\"!chapter.is_scorm_package\">\n\t\t\t\t\t<Draggable\n\t\t\t\t\t\tv-if=\"!chapter.is_scorm_package\"\n\t\t\t\t\t\t:list=\"chapter.lessons\"\n\t\t\t\t\t\t:disabled=\"!allowEdit\"\n\t\t\t\t\t\titem-key=\"name\"\n\t\t\t\t\t\tgroup=\"items\"\n\t\t\t\t\t\t@end=\"updateOutline\"\n\t\t\t\t\t\t:data-chapter=\"chapter.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #item=\"{ element: lesson }\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"outline-lesson pl-8 py-2 pr-4 text-ink-gray-9\"\n\t\t\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\t\t\tisActiveLesson(lesson.number) ? 'bg-surface-selected' : ''\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\t\t\tname: allowEdit ? 'LessonForm' : 'Lesson',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\t\t\tchapterNumber: lesson.number.split('.')[0],\n\t\t\t\t\t\t\t\t\t\t\tlessonNumber: lesson.number.split('.')[1],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center text-sm leading-5 group\">\n\t\t\t\t\t\t\t\t\t\t<MonitorPlay\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.icon === 'icon-youtube'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<HelpCircle\n\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-quiz'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<FileText\n\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"lesson.icon === 'icon-list'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-gray-9 stroke-1 mr-2\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{{ lesson.title }}\n\t\t\t\t\t\t\t\t\t\t<Trash2\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"allowEdit\"\n\t\t\t\t\t\t\t\t\t\t\t@click.prevent=\"trashLesson(lesson.name, chapter.name)\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-ink-red-3 ml-auto invisible group-hover:visible\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"lesson.is_complete\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-green-700 ml-2\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Draggable>\n\t\t\t\t\t<div v-if=\"allowEdit\" class=\"flex mt-2 mb-4 pl-8\">\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\tv-if=\"!chapter.is_scorm_package\"\n\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\tname: 'LessonForm',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tcourseName: courseName,\n\t\t\t\t\t\t\t\t\tchapterNumber: chapter.idx,\n\t\t\t\t\t\t\t\t\tlessonNumber: chapter.lessons.length + 1,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t{{ __('Add Lesson') }}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</div>\n\t\t\t\t</DisclosurePanel>\n\t\t\t</Disclosure>\n\t\t</div>\n\t</div>\n\t<ChapterModal\n\t\tv-model=\"showChapterModal\"\n\t\tv-model:outline=\"outline\"\n\t\t:course=\"courseName\"\n\t\t:chapterDetail=\"getCurrentChapter()\"\n\t/>\n</template>\n<script setup>\nimport { Button, createResource, Tooltip } from 'frappe-ui'\nimport { getCurrentInstance, inject, ref } from 'vue'\nimport Draggable from 'vuedraggable'\nimport { Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue'\nimport {\n\tCheck,\n\tChevronRight,\n\tFileText,\n\tFilePenLine,\n\tHelpCircle,\n\tMonitorPlay,\n\tTrash2,\n} from 'lucide-vue-next'\nimport { useRoute, useRouter } from 'vue-router'\nimport ChapterModal from '@/components/Modals/ChapterModal.vue'\nimport { showToast } from '@/utils'\n\nconst route = useRoute()\nconst router = useRouter()\nconst user = inject('$user')\nconst showChapterModal = ref(false)\nconst currentChapter = ref(null)\nconst app = getCurrentInstance()\nconst { $dialog } = app.appContext.config.globalProperties\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tshowOutline: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tallowEdit: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tgetProgress: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n})\n\nconst outline = createResource({\n\turl: 'lms.lms.utils.get_course_outline',\n\tcache: ['course_outline', props.courseName],\n\tparams: {\n\t\tcourse: props.courseName,\n\t\tprogress: props.getProgress,\n\t},\n\tauto: true,\n})\n\nconst deleteLesson = createResource({\n\turl: 'lms.lms.api.delete_lesson',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\tshowToast('Success', 'Lesson deleted successfully', 'check')\n\t},\n})\n\nconst updateLessonIndex = createResource({\n\turl: 'lms.lms.api.update_lesson_index',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tlesson: values.lesson,\n\t\t\tsourceChapter: values.sourceChapter,\n\t\t\ttargetChapter: values.targetChapter,\n\t\t\tidx: values.idx,\n\t\t}\n\t},\n\tonSuccess() {\n\t\tshowToast('Success', 'Lesson moved successfully', 'check')\n\t},\n})\n\nconst trashLesson = (lessonName, chapterName) => {\n\t$dialog({\n\t\ttitle: __('Delete this lesson?'),\n\t\tmessage: __(\n\t\t\t'Deleting this lesson will permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteLesson.submit({\n\t\t\t\t\t\tlesson: lessonName,\n\t\t\t\t\t\tchapter: chapterName,\n\t\t\t\t\t})\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst openChapterDetail = (index) => {\n\treturn index == route.params.chapterNumber || index == 1\n}\n\nconst openChapterModal = (chapter = null) => {\n\tcurrentChapter.value = chapter\n\tshowChapterModal.value = true\n}\n\nconst getCurrentChapter = () => {\n\treturn currentChapter.value\n}\n\nconst updateOutline = (e) => {\n\tupdateLessonIndex.submit({\n\t\tlesson: e.item.__draggable_context.element.name,\n\t\tsourceChapter: e.from.dataset.chapter,\n\t\ttargetChapter: e.to.dataset.chapter,\n\t\tidx: e.newIndex,\n\t})\n}\n\nconst deleteChapter = createResource({\n\turl: 'lms.lms.api.delete_chapter',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tchapter: values.chapter,\n\t\t}\n\t},\n\tonSuccess() {\n\t\toutline.reload()\n\t\tshowToast('Success', 'Chapter deleted successfully', 'check')\n\t},\n})\n\nconst trashChapter = (chapterName) => {\n\t$dialog({\n\t\ttitle: __('Delete this chapter?'),\n\t\tmessage: __(\n\t\t\t'Deleting this chapter will also delete all its lessons and permanently remove it from the course. This action cannot be undone. Are you sure you want to continue?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteChapter.submit({ chapter: chapterName })\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nconst redirectToChapter = (chapter) => {\n\tif (!chapter.is_scorm_package) return\n\tevent.preventDefault()\n\tif (props.allowEdit) return\n\tif (!user.data) {\n\t\tshowToast(\n\t\t\t__('You are not enrolled'),\n\t\t\t__('Please enroll for this course to view this lesson'),\n\t\t\t'alert-circle'\n\t\t)\n\t\treturn\n\t}\n\n\trouter.push({\n\t\tname: 'SCORMChapter',\n\t\tparams: {\n\t\t\tcourseName: props.courseName,\n\t\t\tchapterName: chapter.name,\n\t\t},\n\t})\n}\n\nconst isActiveLesson = (lessonNumber) => {\n\treturn (\n\t\troute.params.chapterNumber == lessonNumber.split('.')[0] &&\n\t\troute.params.lessonNumber == lessonNumber.split('.')[1]\n\t)\n}\n</script>\n"],"names":["show","_useModel","__props","outline","useSettings","props","chapter","reactive","chapterResource","createResource","values","_a","chapterReference","addChapter","close","__async","validateChapter","data","capture","cleanChapter","showToast","err","editChapter","watch","newChapter","validateFile","file","route","useRoute","router","useRouter","user","inject","showChapterModal","ref","currentChapter","app","getCurrentInstance","$dialog","deleteLesson","updateLessonIndex","trashLesson","lessonName","chapterName","openChapterDetail","index","openChapterModal","getCurrentChapter","updateOutline","deleteChapter","trashChapter","redirectToChapter","isActiveLesson","lessonNumber"],"mappings":"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"}