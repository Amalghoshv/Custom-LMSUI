{"version":3,"file":"CertifiedParticipants-CSAAaVUg.js","sources":["../../../../frontend/src/pages/CertifiedParticipants.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t\t<router-link :to=\"{ name: 'Batches' }\">\n\t\t\t<Button>\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<GraduationCap class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('Get Certified') }}\n\t\t\t</Button>\n\t\t</router-link>\n\t</header>\n\t<div class=\"p-5 lg:w-3/4 mx-auto\">\n\t\t<div\n\t\t\tclass=\"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 justify-between mb-5\"\n\t\t>\n\t\t\t<div class=\"text-lg text-ink-gray-9 font-semibold\">\n\t\t\t\t{{ __('All Certified Participants') }}\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-2 gap-2\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"nameFilter\"\n\t\t\t\t\t:placeholder=\"__('Search by Name')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t@input=\"updateParticipants()\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"categories.data?.length\"\n\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tv-model=\"currentCategory\"\n\t\t\t\t\t\t:options=\"categories.data\"\n\t\t\t\t\t\t:placeholder=\"__('Category')\"\n\t\t\t\t\t\t@change=\"updateParticipants()\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"participants.data?.length\">\n\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\">\n\t\t\t\t<router-link\n\t\t\t\t\tv-for=\"participant in participants.data\"\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'ProfileCertificates',\n\t\t\t\t\t\tparams: { username: participant.username },\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex items-center space-x-2 border rounded-md hover:bg-surface-menu-bar p-2 text-ink-gray-7\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t:image=\"participant.user_image\"\n\t\t\t\t\t\t\t:label=\"participant.full_name\"\n\t\t\t\t\t\t\tsize=\"2xl\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"flex flex-col space-y-2\">\n\t\t\t\t\t\t\t<div class=\"font-medium\">\n\t\t\t\t\t\t\t\t{{ participant.full_name }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"participant.headline\"\n\t\t\t\t\t\t\t\tclass=\"headline text-sm text-ink-gray-7\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ participant.headline }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</router-link>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"!participants.list.loading && participants.hasNextPage\"\n\t\t\t\tclass=\"flex justify-center mt-5\"\n\t\t\t>\n\t\t\t\t<Button @click=\"participants.next()\">\n\t\t\t\t\t{{ __('Load More') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-else-if=\"!participants.list.loading\"\n\t\t\tclass=\"flex flex-col items-center justify-center text-sm text-ink-gray-5 italic mt-48\"\n\t\t>\n\t\t\t<BookOpen class=\"size-10 mx-auto stroke-1 text-ink-gray-4\" />\n\t\t\t<div class=\"text-lg font-medium mb-1\">\n\t\t\t\t{{ __('No participants found') }}\n\t\t\t</div>\n\t\t\t<div class=\"leading-5 w-2/5 text-center\">\n\t\t\t\t{{ __('There are no participants matching this criteria.') }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tAvatar,\n\tBreadcrumbs,\n\tButton,\n\tcreateListResource,\n\tFormControl,\n\tSelect,\n} from 'frappe-ui'\nimport { computed, onMounted, ref } from 'vue'\nimport { updateDocumentTitle } from '@/utils'\nimport { BookOpen, GraduationCap } from 'lucide-vue-next'\n\nconst currentCategory = ref('')\nconst filters = ref({})\nconst nameFilter = ref('')\n\nonMounted(() => {\n\tupdateParticipants()\n})\n\nconst participants = createListResource({\n\tdoctype: 'LMS Certificate',\n\turl: 'lms.lms.api.get_certified_participants',\n\tcache: ['certified_participants'],\n\tstart: 0,\n\tpageLength: 30,\n})\n\nconst categories = createListResource({\n\tdoctype: 'LMS Certificate',\n\turl: 'lms.lms.api.get_certification_categories',\n\tcache: ['certification_categories'],\n\tauto: true,\n\ttransform(data) {\n\t\tdata.unshift({ label: __(''), value: '' })\n\t\treturn data\n\t},\n})\n\nconst updateParticipants = () => {\n\tupdateFilters()\n\tparticipants.update({\n\t\tfilters: filters.value,\n\t})\n\tparticipants.reload()\n}\n\nconst updateFilters = () => {\n\tif (currentCategory.value) {\n\t\tfilters.value.category = currentCategory.value\n\t} else {\n\t\tdelete filters.value.category\n\t}\n\n\tif (nameFilter.value) {\n\t\tfilters.value.member_name = ['like', `%${nameFilter.value}%`]\n\t} else {\n\t\tdelete filters.value.member_name\n\t}\n}\n\nconst breadcrumbs = computed(() => [\n\t{\n\t\tlabel: __('Certified Participants'),\n\t\troute: { name: 'CertifiedParticipants' },\n\t},\n])\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: 'Certified Participants',\n\t\tdescription: 'All participants that have been certified.',\n\t}\n})\nupdateDocumentTitle(pageMeta)\n</script>\n<style>\n.headline {\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 1;\n\t-webkit-box-orient: vertical;\n\ttext-overflow: ellipsis;\n\twidth: 100%;\n\toverflow: hidden;\n}\n</style>\n"],"names":["currentCategory","ref","filters","nameFilter","onMounted","updateParticipants","participants","createListResource","categories","data","updateFilters","breadcrumbs","computed","pageMeta","updateDocumentTitle"],"mappings":"uqCA6GA,MAAMA,EAAkBC,EAAI,EAAE,EACxBC,EAAUD,EAAI,CAAE,CAAA,EAChBE,EAAaF,EAAI,EAAE,EAEzBG,EAAU,IAAM,CACfC,EAAkB,CACnB,CAAC,EAED,MAAMC,EAAeC,EAAmB,CACvC,QAAS,kBACT,IAAK,yCACL,MAAO,CAAC,wBAAwB,EAChC,MAAO,EACP,WAAY,EACb,CAAC,EAEKC,EAAaD,EAAmB,CACrC,QAAS,kBACT,IAAK,2CACL,MAAO,CAAC,0BAA0B,EAClC,KAAM,GACN,UAAUE,EAAM,CACf,OAAAA,EAAK,QAAQ,CAAE,MAAO,GAAG,EAAE,EAAG,MAAO,EAAI,CAAA,EAClCA,CACP,CACF,CAAC,EAEKJ,EAAqB,IAAM,CAChCK,EAAa,EACbJ,EAAa,OAAO,CACnB,QAASJ,EAAQ,KACjB,CAAA,EACDI,EAAa,OAAM,CACpB,EAEMI,EAAgB,IAAM,CACvBV,EAAgB,MACnBE,EAAQ,MAAM,SAAWF,EAAgB,MAEzC,OAAOE,EAAQ,MAAM,SAGlBC,EAAW,MACdD,EAAQ,MAAM,YAAc,CAAC,OAAQ,IAAIC,EAAW,KAAK,GAAG,EAE5D,OAAOD,EAAQ,MAAM,WAEvB,EAEMS,EAAcC,EAAS,IAAM,CAClC,CACC,MAAO,GAAG,wBAAwB,EAClC,MAAO,CAAE,KAAM,uBAAyB,CACxC,CACF,CAAC,EAEKC,EAAWD,EAAS,KAClB,CACN,MAAO,yBACP,YAAa,4CACf,EACC,EACD,OAAAE,EAAoBD,CAAQ"}