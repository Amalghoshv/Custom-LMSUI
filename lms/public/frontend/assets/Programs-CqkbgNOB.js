import{r as $,s as E,f as K,F as q,j as D,d as G,G as n,z as c,J as i,v as h,H as d,C as t,aG as R,y as u,a5 as g,I as l,K as z,L as v,M as B,P as U,q as H,S as L,ay as I,x as o,Q as j}from"./frappe-ui-2-dobwEi.js";import{_ as J}from"./CourseCard-BgWpu12I.js";import{a as O,P as Q,B as A,a3 as W,an as X,s as Y}from"./index-Dg_4Jaqk.js";import"./UserAvatar-B6Y_HQLv.js";import"./CourseInstructors-EkUm29JR.js";const Z={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ee={key:0,class:"pt-5 px-5"},se={class:"mb-10"},te={class:"flex items-center justify-between"},ae={class:"text-xl font-semibold"},oe={class:"flex items-center space-x-2"},re={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5"},ne={class:"relative group"},le={key:0,class:"absolute inset-0 bg-black-overlay-500 opacity-60 rounded-md"},ie={key:1,class:"absolute inset-0 flex items-center justify-center"},me={key:1,class:"text-sm italic text-ink-gray-5 mt-4"},ue={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},ce={class:"text-xl font-medium"},de={class:"leading-5"},ve={__name:"Programs",setup(_e){const m=K("$user"),b=$(!1),p=q(),k=$(""),S=O();E(()=>{var e,s;!S.learningPaths.data&&!((e=m.data)!=null&&e.is_moderator)&&!((s=m.data)!=null&&s.is_instructor)&&p.push({name:"Courses"})});const y=D({url:"lms.lms.utils.get_programs",auto:!0,cache:"programs"}),F=e=>{L("frappe.client.insert",{doc:{doctype:"LMS Program",title:k.value}}).then(s=>{p.push({name:"ProgramForm",params:{programName:s.name}})})},M=(e,s)=>{L("lms.lms.utils.enroll_in_program_course",{program:e,course:s}).then(r=>{r.current_lesson?p.push({name:"Lesson",params:{courseName:s,chapterNumber:r.current_lesson.split("-")[0],lessonNumber:r.current_lesson.split("-")[1]}}):r&&p.push({name:"Lesson",params:{courseName:s,chapterNumber:1,lessonNumber:1}})}).catch(r=>{var _;Y("Error",((_=r.messages)==null?void 0:_[0])||r,"x")})},x=e=>{var s,r;return!((s=m.data)!=null&&s.is_moderator||(r=m.data)!=null&&r.is_instructor||e.membership||e.eligible)},T=G(()=>[{label:"Programs"}]);return(e,s)=>{var _,N,w;const r=I("router-link");return o(),n(v,null,[c("header",Z,[i(t(R),{items:T.value},null,8,["items"]),(_=t(m).data)!=null&&_.is_moderator||(N=t(m).data)!=null&&N.is_instructor?(o(),h(t(z),{key:0,onClick:s[0]||(s[0]=a=>b.value=!0),variant:"solid"},{prefix:u(()=>[i(t(Q),{class:"h-4 w-4 stroke-1.5"})]),default:u(()=>[g(" "+l(e.__("New")),1)]),_:1})):d("",!0)]),(w=t(y).data)!=null&&w.length?(o(),n("div",ee,[(o(!0),n(v,null,B(t(y).data,a=>{var P,C,V;return o(),n("div",se,[c("div",te,[c("div",ae,l(a.name),1),c("div",oe,[a.members?(o(),h(t(j),{key:0,variant:"subtle",theme:"green",size:"lg"},{default:u(()=>[g(l(a.members)+" "+l(a.members==1?e.__("member"):e.__("members")),1)]),_:2},1024)):d("",!0),a.progress?(o(),h(t(j),{key:1,variant:"subtle",theme:"blue",size:"lg"},{default:u(()=>[g(l(a.progress)+l(e.__("% completed")),1)]),_:2},1024)):d("",!0),(P=t(m).data)!=null&&P.is_moderator||(C=t(m).data)!=null&&C.is_instructor?(o(),h(r,{key:2,to:{name:"ProgramForm",params:{programName:a.name}}},{default:u(()=>[i(t(z),null,{prefix:u(()=>[i(t(W),{class:"h-4 w-4 stroke-1.5"})]),default:u(()=>[g(" "+l(e.__("Edit")),1)]),_:1})]),_:2},1032,["to"])):d("",!0)])]),(V=a.courses)!=null&&V.length?(o(),n("div",re,[(o(!0),n(v,null,B(a.courses,f=>(o(),n("div",ne,[i(J,{course:f,onClick:pe=>M(a.name,f.name),class:"cursor-pointer"},null,8,["course","onClick"]),x(f)?(o(),n("div",le)):d("",!0),x(f)?(o(),n("div",ie,[i(t(X),{class:"size-10 text-ink-white"})])):d("",!0)]))),256))])):(o(),n("div",me,l(e.__("No courses in this program")),1))])}),256))])):(o(),n("div",ue,[i(t(A),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),c("div",ce,l(e.__("No programs found")),1),c("div",de,l(e.__("There are no programs available at the moment. Keep an eye out, fresh learning experiences are on the way soon!")),1)])),i(t(H),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=a=>b.value=a),options:{title:e.__("New Program"),actions:[{label:e.__("Create"),variant:"solid",onClick:()=>F(e.close)}]}},{"body-content":u(()=>[i(t(U),{label:e.__("Title"),modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=a=>k.value=a)},null,8,["label","modelValue"])]),_:1},8,["modelValue","options"])],64)}}};export{ve as default};
//# sourceMappingURL=Programs-CqkbgNOB.js.map
