{"version":3,"file":"QuizSubmission-Tqg5XJtK.js","sources":["../../../../frontend/src/pages/QuizSubmission.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs v-if=\"submisisonDetails.doc\" :items=\"breadcrumbs\" />\n\t\t<div class=\"space-x-2\">\n\t\t\t<Badge\n\t\t\t\tv-if=\"submisisonDetails.isDirty\"\n\t\t\t\t:label=\"__('Not Saved')\"\n\t\t\t\tvariant=\"subtle\"\n\t\t\t\ttheme=\"orange\"\n\t\t\t/>\n\t\t\t<Button variant=\"solid\" @click=\"saveSubmission()\">\n\t\t\t\t{{ __('Save') }}\n\t\t\t</Button>\n\t\t</div>\n\t</header>\n\t<div v-if=\"submisisonDetails.doc\" class=\"w-1/2 mx-auto py-5 space-y-5\">\n\t\t<div class=\"text-xl font-semibold text-ink-gray-9\">\n\t\t\t{{ submisisonDetails.doc.member_name }}\n\t\t</div>\n\t\t<div class=\"space-y-4 border p-5 rounded-md\">\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submisisonDetails.doc.quiz_title\"\n\t\t\t\t\t:label=\"__('Quiz')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submisisonDetails.doc.member_name\"\n\t\t\t\t\t:label=\"__('Member')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submisisonDetails.doc.score\"\n\t\t\t\t\t:label=\"__('Score')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"submisisonDetails.doc.percentage\"\n\t\t\t\t\t:label=\"__('Percentage')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-for=\"(row, index) in submisisonDetails.doc.result\"\n\t\t\tclass=\"border p-5 rounded-md space-y-4\"\n\t\t>\n\t\t\t<div class=\"flex items-start space-x-1 font-semibold text-ink-gray-9\">\n\t\t\t\t<!-- <span>\n\t\t\t\t\t{{ index + 1 }}.\n\t\t\t\t</span> -->\n\t\t\t\t<span class=\"leading-5\" v-html=\"row.question\"> </span>\n\t\t\t</div>\n\t\t\t<div class=\"leading-5 text-ink-gray-7 space-x-1\">\n\t\t\t\t<span> {{ __('Answer') }}: </span>\n\t\t\t\t<span v-html=\"row.answer\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<FormControl v-model=\"row.marks\" :label=\"__('Marks')\" />\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"row.marks_out_of\"\n\t\t\t\t\t:label=\"__('Marks out of')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tcreateDocumentResource,\n\tBreadcrumbs,\n\tFormControl,\n\tButton,\n\tBadge,\n} from 'frappe-ui'\nimport { computed, onBeforeUnmount, onMounted, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showToast } from '@/utils'\n\nconst router = useRouter()\nconst user = inject('$user')\n\nonMounted(() => {\n\tif (!user.data?.is_instructor && !user.data?.is_moderator)\n\t\trouter.push({ name: 'Courses' })\n\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\nonBeforeUnmount(() => {\n\twindow.removeEventListener('keydown', keyboardShortcut)\n})\n\nconst keyboardShortcut = (e) => {\n\tif (\n\t\te.key === 's' &&\n\t\t(e.ctrlKey || e.metaKey) &&\n\t\t!e.target.classList.contains('ProseMirror')\n\t) {\n\t\tsaveSubmission()\n\t\te.preventDefault()\n\t}\n}\n\nconst props = defineProps({\n\tsubmission: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst submisisonDetails = createDocumentResource({\n\tdoctype: 'LMS Quiz Submission',\n\tname: props.submission,\n\tauto: true,\n})\n\nconst breadcrumbs = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Quiz Submissions'),\n\t\t\troute: {\n\t\t\t\tname: 'QuizSubmissionList',\n\t\t\t\tparams: {\n\t\t\t\t\tquizID: submisisonDetails.doc.quiz,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: submisisonDetails.doc.quiz_title,\n\t\t},\n\t]\n})\n\nconst saveSubmission = () => {\n\tsubmisisonDetails.save.submit(\n\t\t{},\n\t\t{\n\t\t\tonError(err) {\n\t\t\t\tshowToast(__('Error'), __(err.messages?.[0] || err), 'x')\n\t\t\t},\n\t\t}\n\t)\n}\n</script>\n"],"names":["router","useRouter","user","inject","onMounted","_a","_b","keyboardShortcut","onBeforeUnmount","e","saveSubmission","submisisonDetails","createDocumentResource","__props","breadcrumbs","computed","err","showToast"],"mappings":"63BAsFA,MAAMA,EAASC,EAAS,EAClBC,EAAOC,EAAO,OAAO,EAE3BC,EAAU,IAAM,SACX,GAACC,EAAAH,EAAK,OAAL,MAAAG,EAAW,gBAAiB,GAACC,EAAAJ,EAAK,OAAL,MAAAI,EAAW,eAC5CN,EAAO,KAAK,CAAE,KAAM,SAAW,CAAA,EAEhC,OAAO,iBAAiB,UAAWO,CAAgB,CACpD,CAAC,EAEDC,EAAgB,IAAM,CACrB,OAAO,oBAAoB,UAAWD,CAAgB,CACvD,CAAC,EAED,MAAMA,EAAoBE,GAAM,CAE9BA,EAAE,MAAQ,MACTA,EAAE,SAAWA,EAAE,UAChB,CAACA,EAAE,OAAO,UAAU,SAAS,aAAa,IAE1CC,EAAc,EACdD,EAAE,eAAc,EAElB,EASME,EAAoBC,EAAuB,CAChD,QAAS,sBACT,KATaC,EASD,WACZ,KAAM,EACP,CAAC,EAEKC,EAAcC,EAAS,IACrB,CACN,CACC,MAAO,GAAG,kBAAkB,EAC5B,MAAO,CACN,KAAM,qBACN,OAAQ,CACP,OAAQJ,EAAkB,IAAI,IAC9B,CACD,CACD,EACD,CACC,MAAOA,EAAkB,IAAI,UAC7B,CACH,CACC,EAEKD,EAAiB,IAAM,CAC5BC,EAAkB,KAAK,OACtB,CAAE,EACF,CACC,QAAQK,EAAK,OACZC,EAAU,GAAG,OAAO,EAAG,KAAGZ,EAAAW,EAAI,WAAJ,YAAAX,EAAe,KAAMW,CAAG,EAAG,GAAG,CACxD,CACJ,CACA,CACA"}