{"version":3,"file":"Jobs-Dh2qFRIH.js","sources":["../../../../frontend/src/components/JobCard.vue","../../../../frontend/src/pages/Jobs.vue"],"sourcesContent":["<template>\n\t<div class=\"flex space-x-4 border rounded-md p-2\">\n\t\t<Avatar :image=\"job.company_logo\" :label=\"job.job_title\" size=\"2xl\" />\n\t\t<div class=\"flex flex-col space-y-2 flex-1\">\n\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t<span class=\"font-semibold text-ink-gray-9\">\n\t\t\t\t\t{{ job.job_title }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center space-x-2 text-ink-gray-5\">\n\t\t\t\t<Building2 class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span>\n\t\t\t\t\t{{ job.company_name }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center space-x-2 text-ink-gray-5\">\n\t\t\t\t<MapPin class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span>\n\t\t\t\t\t{{ job.location }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center space-x-2 text-ink-gray-5\">\n\t\t\t\t<Shapes class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span>\n\t\t\t\t\t{{ job.type }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center space-x-2 text-ink-gray-5\">\n\t\t\t\t<Calendar class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span> {{ __('posted') }} {{ dayjs(job.creation).fromNow() }} </span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { Building2, Calendar, MapPin, Shapes } from 'lucide-vue-next'\nimport { inject } from 'vue'\nimport { Avatar } from 'frappe-ui'\n\nconst dayjs = inject('$dayjs')\nconst props = defineProps({\n\tjob: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n})\n</script>\n","<template>\n\t<div class=\"\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\tclass=\"h-7\"\n\t\t\t\t:items=\"[{ label: __('Jobs'), route: { name: 'Jobs' } }]\"\n\t\t\t/>\n\t\t\t<router-link\n\t\t\t\tv-if=\"user.data?.name\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'JobCreation',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tjobName: 'new',\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button variant=\"solid\">\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('New Job') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t</header>\n\t\t<div>\n\t\t\t<div class=\"lg:w-3/4 mx-auto p-5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between mb-5\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"text-xl text-ink-gray-9 font-semibold\">\n\t\t\t\t\t\t{{ __('Find the perfect job for you') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"grid grid-cols-2 gap-2\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t:placeholder=\"__('Search')\"\n\t\t\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t\t@input=\"updateJobs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 stroke-1.5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"jobType\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"jobTypes\"\n\t\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t\t:placeholder=\"__('Type')\"\n\t\t\t\t\t\t\t@change=\"updateJobs\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"jobs.data?.length\"\n\t\t\t\t\tclass=\"grid grid-cols-1 lg:grid-cols-2 gap-5\"\n\t\t\t\t>\n\t\t\t\t\t<router-link\n\t\t\t\t\t\tv-for=\"job in jobs.data\"\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'JobDetail',\n\t\t\t\t\t\t\tparams: { job: job.name },\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:key=\"job.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<JobCard :job=\"job\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"text-ink-gray-7 italic p-5 w-fit mx-auto\">\n\t\t\t\t\t{{ __('No jobs posted') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { Button, Breadcrumbs, createResource, FormControl } from 'frappe-ui'\nimport { Plus, Search } from 'lucide-vue-next'\nimport { inject, computed, ref, onMounted } from 'vue'\nimport JobCard from '@/components/JobCard.vue'\nimport { updateDocumentTitle } from '@/utils'\n\nconst user = inject('$user')\nconst jobType = ref(null)\nconst searchQuery = ref('')\nconst filters = ref({})\nconst orFilters = ref({})\n\nonMounted(() => {\n\tlet queries = new URLSearchParams(location.search)\n\tif (queries.has('type')) {\n\t\tjobType.value = queries.get('type')\n\t}\n\tupdateJobs()\n})\n\nconst jobs = createResource({\n\turl: 'lms.lms.api.get_job_opportunities',\n\tcache: ['jobs'],\n})\n\nconst updateJobs = () => {\n\tupdateFilters()\n\tjobs.update({\n\t\tparams: {\n\t\t\tfilters: filters.value,\n\t\t\torFilters: orFilters.value,\n\t\t},\n\t})\n\tjobs.reload()\n}\n\nconst updateFilters = () => {\n\tfilters.value.status = 'Open'\n\tfilters.value.disabled = 0\n\n\tif (jobType.value) {\n\t\tfilters.value.type = jobType.value\n\t} else {\n\t\tdelete filters.value.type\n\t}\n\n\tif (searchQuery.value) {\n\t\torFilters.value = {\n\t\t\tjob_title: ['like', `%${searchQuery.value}%`],\n\t\t\tcompany_name: ['like', `%${searchQuery.value}%`],\n\t\t\tlocation: ['like', `%${searchQuery.value}%`],\n\t\t}\n\t} else {\n\t\torFilters.value = {}\n\t}\n}\n\nconst jobTypes = computed(() => {\n\treturn [\n\t\t'',\n\t\t{ label: __('Full Time'), value: 'Full Time' },\n\t\t{ label: __('Part Time'), value: 'Part Time' },\n\t\t{ label: __('Contract'), value: 'Contract' },\n\t\t{ label: __('Freelance'), value: 'Freelance' },\n\t]\n})\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: 'Jobs',\n\t\tdescription: 'An open job board for the community',\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n</script>\n"],"names":["dayjs","inject","user","jobType","ref","searchQuery","filters","orFilters","onMounted","queries","updateJobs","jobs","createResource","updateFilters","jobTypes","computed","pageMeta","updateDocumentTitle"],"mappings":"wvBAuCA,MAAMA,EAAQC,EAAO,QAAQ,+hCCkD7B,MAAMC,EAAOD,EAAO,OAAO,EACrBE,EAAUC,EAAI,IAAI,EAClBC,EAAcD,EAAI,EAAE,EACpBE,EAAUF,EAAI,CAAE,CAAA,EAChBG,EAAYH,EAAI,CAAE,CAAA,EAExBI,EAAU,IAAM,CACf,IAAIC,EAAU,IAAI,gBAAgB,SAAS,MAAM,EAC7CA,EAAQ,IAAI,MAAM,IACrBN,EAAQ,MAAQM,EAAQ,IAAI,MAAM,GAEnCC,EAAU,CACX,CAAC,EAED,MAAMC,EAAOC,EAAe,CAC3B,IAAK,oCACL,MAAO,CAAC,MAAM,CACf,CAAC,EAEKF,EAAa,IAAM,CACxBG,EAAa,EACbF,EAAK,OAAO,CACX,OAAQ,CACP,QAASL,EAAQ,MACjB,UAAWC,EAAU,KACrB,CACD,CAAA,EACDI,EAAK,OAAM,CACZ,EAEME,EAAgB,IAAM,CAC3BP,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,SAAW,EAErBH,EAAQ,MACXG,EAAQ,MAAM,KAAOH,EAAQ,MAE7B,OAAOG,EAAQ,MAAM,KAGlBD,EAAY,MACfE,EAAU,MAAQ,CACjB,UAAW,CAAC,OAAQ,IAAIF,EAAY,KAAK,GAAG,EAC5C,aAAc,CAAC,OAAQ,IAAIA,EAAY,KAAK,GAAG,EAC/C,SAAU,CAAC,OAAQ,IAAIA,EAAY,KAAK,GAAG,CAC9C,EAEEE,EAAU,MAAQ,CAAA,CAEpB,EAEMO,EAAWC,EAAS,IAClB,CACN,GACA,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,EAC9C,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,EAC9C,CAAE,MAAO,GAAG,UAAU,EAAG,MAAO,UAAY,EAC5C,CAAE,MAAO,GAAG,WAAW,EAAG,MAAO,WAAa,CAChD,CACC,EACKC,EAAWD,EAAS,KAClB,CACN,MAAO,OACP,YAAa,qCACf,EACC,EAED,OAAAE,EAAoBD,CAAQ"}